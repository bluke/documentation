<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
    <meta content='width=device-width, initial-scale=1' name='viewport'>
    <link href="/assets/stylesheets/documentation.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/assets/javascripts/documentation.js" type="text/javascript"></script>
  </head>
  <body class='developers developers_api developers_api_v1 developers_api_v1_index'>
    <header class='notice'>
      <p>En cas de problème avec la documentation, veuillez <a href="https://github.com/ares-ensiie/documentation/issues/new">ouvrir une issue</a> ou nous contacter sur <a href="irc://irc.iiens.net/%23ares">#ares</a></p>
    </header>
    <article>
      <h1>Ares API v1</h1>&#x000A;&#x000A;<p><em>Ce document décrit le fonctionnement de l&#39;API v1 de ARES</em></p>&#x000A;&#x000A;<h2>Sécurité</h2>&#x000A;&#x000A;<p><em>On distingue les endpoint accessible par des application et ceux accessible par des utilisateurs. Les applications s&#39;authentifient avec des <strong>tokens d&#39;application</strong> et les utilisateur s&#39;authentifient avec des <strong>tokens utilisateur</strong>.</em></p>&#x000A;&#x000A;<h3>Accès application</h3>&#x000A;&#x000A;<p>Les endpoints qui ne manipulent pas de ressources appartenant à un utilisateur en particulier ne demandent pas d&#39;authentifier un utilisateur. On peux accéder à ces endpoints simplement en passant les paramètres <code>client_id</code> et <code>client_secret</code> aux différents endpoints.</p>&#x000A;&#x000A;<p>Les tokens sont généré à la création de votre application et vous pouvez les trouver dans les informations relatives à votre application. Si vous ne savez pas comment créer une application, nous vous invitons à <a href="/doc/create_application">suivre le guide de création d&#39;application</a>.</p>&#x000A;&#x000A;<p><em>Dans la documentation anglo-saxonne, ces tokend sont appelés &ldquo;userless tokens&rdquo;.</em></p>&#x000A;&#x000A;<h3>Accès utilisateur</h3>&#x000A;&#x000A;<p>Certains endpoints permettent d&#39;accéder à des données utilisateur. Pour l&#39;authentification et l&#39;autorisation de vos applications, nous implémentons <a href="http://oauth.net/2/">le protocole OAuth2</a>.</p>&#x000A;&#x000A;<p>Pour comprendre le fonctionnement du protocole OAuth2, nous vous conseillons de lire <a href="/doc/strasbourg-d-or">le tutoriel qui vous expliquera comment créer l&#39;application Strasbourg d&#39;Or</a>.</p>&#x000A;&#x000A;<h3>Erreurs</h3>&#x000A;&#x000A;<p>Nous n&#39;avons pas encore défini les réponses de notre API en cas d&#39;erreur. Pour l&#39;instant vous pouvez vous fier aux status code <code>401</code> et <code>50X</code>.</p>&#x000A;&#x000A;<ul>&#x000A;<li><code>401</code> Unauthorized : Les tokens donnés ne fonctionnent pas</li>&#x000A;<li><code>50X</code> : La faute viens de Ares, merci de <a href="https://bug.ares-ensiie.eu/projects/retour-utilisateurs/issues/new">nous contacter sur notre bug tracker</a>.</li>&#x000A;</ul>&#x000A;&#x000A;<h2>Resources</h2>&#x000A;&#x000A;<h3>Utilisateurs</h3>&#x000A;&#x000A;<h4>Informations sur un utilisateur</h4>&#x000A;<div class="highlight"><pre><span class="n">GET</span> <span class="o">/</span><span class="n">users</span><span class="o">/:</span><span class="n">username</span>&#x000A;</pre></div>&#x000A;<p>Ce endpoint permet de récupérer des informations à propos d&#39;un utilisateur à condition de connaitre sont <code>username</code>.</p>&#x000A;&#x000A;<h5>Exemple de requête</h5>&#x000A;<div class="highlight"><pre><span class="n">GET</span> <span class="o">/</span><span class="n">users</span><span class="o">/</span><span class="n">chobert2010</span>&#x000A;</pre></div>&#x000A;<h5>Response</h5>&#x000A;<div class="highlight"><pre><span class="n">Status</span><span class="o">:</span> <span class="mi">200</span> <span class="n">OK</span>&#x000A;</pre></div><div class="highlight"><pre><span class="p">{</span>&#x000A;  <span class="s">&quot;id&quot;</span><span class="o">:</span> <span class="s">&quot;5123bf6c104729020000004f&quot;</span><span class="p">,</span>&#x000A;  <span class="s">&quot;username&quot;</span><span class="o">:</span> <span class="s">&quot;chobert2010&quot;</span><span class="p">,</span>&#x000A;  <span class="s">&quot;first_name&quot;</span><span class="o">:</span> <span class="s">&quot;Paul&quot;</span><span class="p">,</span>&#x000A;  <span class="s">&quot;last_name&quot;</span><span class="o">:</span> <span class="s">&quot;Chobert&quot;</span><span class="p">,</span>&#x000A;  <span class="s">&quot;email&quot;</span><span class="o">:</span> <span class="s">&quot;paul@chobert.fr&quot;</span><span class="p">,</span>&#x000A;  <span class="s">&quot;promotion&quot;</span><span class="o">:</span> <span class="s">&quot;2013&quot;</span><span class="p">,</span>&#x000A;  <span class="s">&quot;avatar&quot;</span><span class="o">:</span> <span class="p">{</span>&#x000A;    <span class="s">&quot;url&quot;</span><span class="o">:</span> <span class="s">&quot;//ares-intranet.s3.amazonaws.com/users/avatars/5123/bf6c/1047/2902/0000/004f/original/gravatar.jpg?1361310612&quot;</span><span class="p">,</span>&#x000A;    <span class="s">&quot;formats&quot;</span><span class="o">:</span> <span class="p">{</span>&#x000A;      <span class="s">&quot;mini&quot;</span><span class="o">:</span> <span class="p">{</span>&#x000A;        <span class="s">&quot;format&quot;</span><span class="o">:</span> <span class="s">&quot;50x50#&quot;</span><span class="p">,</span>&#x000A;        <span class="s">&quot;url&quot;</span><span class="o">:</span> <span class="s">&quot;//ares-intranet.s3.amazonaws.com/users/avatars/5123/bf6c/1047/2902/0000/004f/mini/gravatar.jpg?1361310612&quot;</span>&#x000A;      <span class="p">},</span>&#x000A;      <span class="s">&quot;thumb&quot;</span><span class="o">:</span> <span class="p">{</span>&#x000A;        <span class="s">&quot;format&quot;</span><span class="o">:</span> <span class="s">&quot;150x150#&quot;</span><span class="p">,</span>&#x000A;        <span class="s">&quot;url&quot;</span><span class="o">:</span> <span class="s">&quot;//ares-intranet.s3.amazonaws.com/users/avatars/5123/bf6c/1047/2902/0000/004f/thumb/gravatar.jpg?1361310612&quot;</span>&#x000A;      <span class="p">},</span>&#x000A;      <span class="s">&quot;original&quot;</span><span class="o">:</span> <span class="p">{</span>&#x000A;        <span class="s">&quot;format&quot;</span><span class="o">:</span> <span class="s">&quot;500x500&gt;&quot;</span><span class="p">,</span>&#x000A;        <span class="s">&quot;url&quot;</span><span class="o">:</span> <span class="s">&quot;//ares-intranet.s3.amazonaws.com/users/avatars/5123/bf6c/1047/2902/0000/004f/original/gravatar.jpg?1361310612&quot;</span>&#x000A;      <span class="p">}</span>&#x000A;    <span class="p">}</span>&#x000A;  <span class="p">}</span>&#x000A;<span class="p">}</span>&#x000A;</pre></div>&#x000A;<h4>Recherche d&#39;utilisateur</h4>&#x000A;<div class="highlight"><pre><span class="n">GET</span> <span class="o">/</span><span class="n">users</span><span class="o">/</span><span class="n">search</span>&#x000A;</pre></div>&#x000A;<p>Les paramètres possibles sont :&#x000A;- <code>q</code> : Ce paramètre peut désigner soit le username, le nom, le prénom, le surnom d&#39;un utilisateur. Vous pouvez faire la recherche avec <code>q=bee</code> qui vous donnera les utilisateurs ayant soit le prénom, nom, ou … <code>bee</code> ou vous pouvez spécifier l&#39;attribut sur lequel vous souhaitez faire la recherche. <code>q=first_name:leo</code> cherchera les élèves qui ont pour prénom <code>leo</code> (les accents ne sont pas pris en compte dans la recherche). Il est possible d&#39;utiliser une <code>*</code> comme wildcard, je ne précise pas l&#39;effet de <code>q=p*</code>.&#x000A;- <code>promotion</code> : Ce paramètre permet de filtrer par la promotion des utilisateurs, <code>promotion=2012</code> ne retournera que des étudiants de la promotion <code>2012</code>. Il est possible de passer deux promotions en paramètres <code>promotion=2012,2013</code> retourne des étudiant des promotions <code>2012</code> ou <code>2013</code>.</p>&#x000A;&#x000A;<h5>Exemple de requête</h5>&#x000A;<div class="highlight"><pre><span class="n">GET</span> <span class="o">/</span><span class="n">users</span><span class="o">/</span><span class="n">search</span><span class="o">?</span><span class="n">q</span><span class="o">=</span><span class="n">first_name</span><span class="o">:</span><span class="n">lu</span><span class="o">*&amp;</span><span class="n">promotion</span><span class="o">=</span><span class="mi">2013</span><span class="p">,</span><span class="mi">2014</span>&#x000A;</pre></div>&#x000A;<h5>Reponse</h5>&#x000A;<div class="highlight"><pre><span class="n">Status</span><span class="o">:</span> <span class="mi">200</span> <span class="n">OK</span>&#x000A;</pre></div><div class="highlight"><pre><span class="cp">[</span>&#x000A;  <span class="p">{</span>&#x000A;    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;5123bf66104729020000004d&quot;</span><span class="p">,</span>&#x000A;    <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;bee2010&quot;</span><span class="p">,</span>&#x000A;    <span class="s2">&quot;first_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Lucas&quot;</span><span class="p">,</span>&#x000A;    <span class="s2">&quot;last_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Bee&quot;</span><span class="p">,</span>&#x000A;    <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;MASKED&quot;</span><span class="p">,</span>&#x000A;    <span class="s2">&quot;promotion&quot;</span><span class="p">:</span> <span class="s2">&quot;2013&quot;</span><span class="p">,</span>&#x000A;    <span class="s2">&quot;avatar&quot;</span><span class="p">:{</span>&#x000A;      <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;//ares-intranet.s3.amazonaws.com/users/avatars/5123/bf66/1047/2902/0000/004d/original/Lucas_Bee.jpg?1361297254&quot;</span><span class="p">,</span>&#x000A;      <span class="s2">&quot;formats&quot;</span><span class="p">:{}</span>&#x000A;    <span class="p">}</span>&#x000A;  <span class="p">},</span>&#x000A;  <span class="p">{</span>&#x000A;    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;5123bf69104729020000004e&quot;</span><span class="p">,</span>&#x000A;    <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;bertot2010&quot;</span><span class="p">,</span>&#x000A;    <span class="s2">&quot;first_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Luke&quot;</span><span class="p">,</span>&#x000A;    <span class="s2">&quot;last_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Bertot&quot;</span><span class="p">,</span>&#x000A;    <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;MASKED&quot;</span><span class="p">,</span>&#x000A;    <span class="s2">&quot;promotion&quot;</span><span class="p">:</span> <span class="s2">&quot;2013&quot;</span><span class="p">,</span>&#x000A;    <span class="s2">&quot;avatar&quot;</span><span class="p">:{</span>&#x000A;      <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;//ares-intranet.s3.amazonaws.com/users/avatars/5123/bf69/1047/2902/0000/004e/original/luke.jpg?1361381150&quot;</span><span class="p">,</span>&#x000A;      <span class="s2">&quot;formats&quot;</span><span class="p">:{</span>&#x000A;        <span class="s2">&quot;mini&quot;</span><span class="p">:{</span>&#x000A;          <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;50x50#&quot;</span><span class="p">,</span>&#x000A;          <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;//ares-intranet.s3.amazonaws.com/users/avatars/5123/bf69/1047/2902/0000/004e/mini/luke.jpg?1361381150&quot;</span>&#x000A;        <span class="p">},</span>&#x000A;        <span class="s2">&quot;thumb&quot;</span><span class="p">:{</span>&#x000A;          <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;150x150#&quot;</span><span class="p">,</span>&#x000A;          <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;//ares-intranet.s3.amazonaws.com/users/avatars/5123/bf69/1047/2902/0000/004e/thumb/luke.jpg?1361381150&quot;</span>&#x000A;        <span class="p">},</span>&#x000A;        <span class="s2">&quot;original&quot;</span><span class="p">:{</span>&#x000A;          <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;500x500&gt;&quot;</span><span class="p">,</span>&#x000A;          <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;//ares-intranet.s3.amazonaws.com/users/avatars/5123/bf69/1047/2902/0000/004e/original/luke.jpg?1361381150&quot;</span>&#x000A;        <span class="p">}</span>&#x000A;      <span class="p">}</span>&#x000A;    <span class="p">}</span>&#x000A;  <span class="p">},</span>&#x000A;  <span class="p">{</span>&#x000A;    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;5123becb104729020000000e&quot;</span><span class="p">,</span>&#x000A;    <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;saurel2011&quot;</span><span class="p">,</span>&#x000A;    <span class="s2">&quot;first_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Lucas&quot;</span><span class="p">,</span>&#x000A;    <span class="s2">&quot;last_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Saurel&quot;</span><span class="p">,</span>&#x000A;    <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;MASKED&quot;</span><span class="p">,</span>&#x000A;    <span class="s2">&quot;promotion&quot;</span><span class="p">:</span> <span class="s2">&quot;2014&quot;</span><span class="p">,</span>&#x000A;    <span class="s2">&quot;avatar&quot;</span><span class="p">:{</span>&#x000A;      <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;//ares-intranet.s3.amazonaws.com/users/avatars/5123/becb/1047/2902/0000/000e/original/Lucas_Saurel.jpg?1361297099&quot;</span><span class="p">,</span>&#x000A;      <span class="s2">&quot;formats&quot;</span><span class="p">:{</span>&#x000A;        <span class="s2">&quot;mini&quot;</span><span class="p">:{</span>&#x000A;          <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;50x50#&quot;</span><span class="p">,</span>&#x000A;          <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;//ares-intranet.s3.amazonaws.com/users/avatars/5123/becb/1047/2902/0000/000e/mini/Lucas_Saurel.jpg?1361297099&quot;</span>&#x000A;        <span class="p">},</span>&#x000A;        <span class="s2">&quot;thumb&quot;</span><span class="p">:{</span>&#x000A;          <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;150x150#&quot;</span><span class="p">,</span>&#x000A;          <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;//ares-intranet.s3.amazonaws.com/users/avatars/5123/becb/1047/2902/0000/000e/thumb/Lucas_Saurel.jpg?1361297099&quot;</span>&#x000A;        <span class="p">},</span>&#x000A;        <span class="s2">&quot;original&quot;</span><span class="p">:{</span>&#x000A;          <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;500x500&gt;&quot;</span><span class="p">,</span>&#x000A;          <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;//ares-intranet.s3.amazonaws.com/users/avatars/5123/becb/1047/2902/0000/000e/original/Lucas_Saurel.jpg?1361297099&quot;</span>&#x000A;        <span class="p">}</span>&#x000A;      <span class="p">}</span>&#x000A;    <span class="p">}</span>&#x000A;  <span class="p">}</span>&#x000A;<span class="cp">]</span>&#x000A;</pre></div>&#x000A;<h3>Promotions</h3>&#x000A;&#x000A;<h5>Liste des promotions</h5>&#x000A;<div class="highlight"><pre><span class="n">GET</span> <span class="o">/</span><span class="n">promotions</span>&#x000A;</pre></div>&#x000A;<p><strong>/!\ CE ENDPOINT EST SUCEPTIBLE DE CHANGER /!\</strong></p>&#x000A;&#x000A;<p>Pour l&#39;instant, ce endpoint liste toute les promotions et affichent tout les étudiants ce ces pormotions.</p>&#x000A;&#x000A;<h4>Afficher une promotion</h4>&#x000A;<div class="highlight"><pre><span class="n">GET</span> <span class="o">/</span><span class="n">promotion</span><span class="o">/:</span><span class="n">name</span>&#x000A;</pre></div>&#x000A;<h5>Exemple de requête</h5>&#x000A;<div class="highlight"><pre><span class="n">GET</span> <span class="o">/</span><span class="n">promotion</span><span class="o">/</span><span class="mi">2012</span>&#x000A;</pre></div>&#x000A;<h5>Reponse</h5>&#x000A;<div class="highlight"><pre><span class="n">Status</span><span class="o">:</span> <span class="mi">200</span> <span class="n">OK</span>&#x000A;</pre></div><div class="highlight"><pre><span class="p">{</span>&#x000A;  <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;5123befa1047290200000020&quot;</span><span class="o">,</span>&#x000A;  <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;2012&quot;</span><span class="o">,</span>&#x000A;  <span class="s2">&quot;number_of_students&quot;</span><span class="o">:</span> <span class="m">9</span><span class="o">,</span>&#x000A;  <span class="s2">&quot;students&quot;</span><span class="o">:</span> <span class="cp">[</span>&#x000A;    <span class="p">{</span>&#x000A;      <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;5123befa1047290200000021&quot;</span><span class="p">,</span>&#x000A;      <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;boutry2009&quot;</span><span class="p">,</span>&#x000A;      <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;boutry.pierre@gmail.com&quot;</span><span class="p">,</span>&#x000A;      <span class="s2">&quot;first_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Pierre&quot;</span><span class="p">,</span>&#x000A;      <span class="s2">&quot;last_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Boutry&quot;</span><span class="p">,</span>&#x000A;      <span class="s2">&quot;promotion&quot;</span><span class="p">:</span> <span class="s2">&quot;2012&quot;</span><span class="p">,</span>&#x000A;      <span class="s2">&quot;avatar&quot;</span><span class="p">:</span> <span class="p">{</span>&#x000A;        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;/avatars/original/missing.png&quot;</span><span class="p">,</span>&#x000A;        <span class="s2">&quot;formats&quot;</span><span class="p">:</span> <span class="p">{</span>&#x000A;          <span class="s2">&quot;mini&quot;</span><span class="p">:</span> <span class="p">{</span>&#x000A;            <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;50x50#&quot;</span><span class="p">,</span>&#x000A;            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;/avatars/mini/missing.png&quot;</span>&#x000A;          <span class="p">},</span>&#x000A;          <span class="s2">&quot;original&quot;</span><span class="p">:</span> <span class="p">{</span>&#x000A;            <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;500x500&gt;&quot;</span><span class="p">,</span>&#x000A;            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;/avatars/original/missing.png&quot;</span>&#x000A;          <span class="p">},</span>&#x000A;          <span class="s2">&quot;thumb&quot;</span><span class="p">:</span> <span class="p">{</span>&#x000A;            <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;150x150#&quot;</span><span class="p">,</span>&#x000A;            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;/avatars/thumb/missing.png&quot;</span>&#x000A;          <span class="p">}</span>&#x000A;        <span class="p">}</span>&#x000A;      <span class="p">}</span>&#x000A;    <span class="p">},</span>&#x000A;    <span class="nx">...</span>&#x000A;  <span class="cp">]</span>&#x000A;<span class="p">}</span>&#x000A;</pre></div>&#x000A;<h2>Vocabulaire</h2>&#x000A;&#x000A;<ul>&#x000A;<li><strong>endpoint</strong>  : C&#39;est l&#39;adresse pour accéder à une ressource.</li>&#x000A;</ul>
    </article>
  </body>
</html>
